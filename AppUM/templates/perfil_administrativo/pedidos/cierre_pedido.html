{% extends "perfil_administrativo/padre_perfil_administrativo.html" %}
{% load static %}

{% block contenidoQueCambia %}

<div class="container mt-4">
    <div class="card shadow-sm border-0">
        <div class="card-body text-center">
            <h5 class="card-title text-success">
                <i class="fas fa-check-circle"></i> Confirmación de cierre de pedido
            </h5>
            <hr>
            <form action="" method="POST">
                {% csrf_token %}
                {% if not message %}
                    <p class="mb-4">¿Está seguro que desea <strong>cerrar este pedido</strong>? Una vez cerrado, no podrá ser modificado.</p>
                    
                    <!-- Checkbox para notificar al cliente -->
                     {% if mostrar_cbox %}
                    <div class="form-check mb-3 d-flex justify-content-center">
                        <input type="checkbox" class="form-check-input" id="notificarCliente" name="notificar_cliente">
                        <label class="form-check-label ms-2" for="notificarCliente">
                            Enviar notificación al cliente
                        </label>
                    </div>
                    {% endif %}

                    <!-- Botones de acción -->
                    <div class="d-flex justify-content-center">
                        <button type="submit" class="btn btn-success mx-2">
                            <i class="fas fa-check"></i> Cerrar Pedido
                        </button>
                        <a href="{% url 'Pedidos' %}" class="btn btn-secondary mx-2">
                            <i class="fas fa-times"></i> Cancelar
                        </a>
                    </div>
                {% endif %}
            </form>

            {% if message %}
                <div class="alert alert-success mt-4">
                    <p>{{ message }}</p>
                    <p>Para volver al menú de pedidos, haz click <a href="{% url 'Pedidos' %}">aquí</a>.</p>
                </div>
            {% else %}
                <p class="text-danger mt-3">{{ error_message }}</p>
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}
